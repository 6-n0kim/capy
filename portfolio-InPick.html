<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>InPick - Portfolio Details</title>
    <meta name="description" content="AI 기반 여행 일정 생성 및 추천 플랫폼 InPick 포트폴리오" />

    <link href="assets/img/favicon.png" rel="icon" />
    <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon" />

    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />

    <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet" />
    <link href="assets/vendor/aos/aos.css" rel="stylesheet" />
    <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet" />
    <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet" />

    <link href="assets/css/main.css" rel="stylesheet" />

    <!-- Page Custom CSS (moved from inline <style>) -->
    <link href="assets/css/portfolio-details-custom.css" rel="stylesheet" />

    <script type="module">
      import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
      mermaid.initialize({ startOnLoad: true, theme: 'neutral' });
    </script>
  </head>

  <body class="portfolio-details-page">
    <div id="site-header"></div>

    <main class="main">
      <div class="page-title" data-aos="fade">
        <div class="container d-lg-flex justify-content-between align-items-center">
          <h1 class="mb-2 mb-lg-0">InPick Project</h1>
          <nav class="breadcrumbs">
            <ol>
              <li><a href="index.html">Home</a></li>
              <li class="current">InPick</li>
            </ol>
          </nav>
        </div>
      </div>

      <section id="portfolio-details" class="portfolio-details section">
        <div class="container" data-aos="fade-up">
          <div class="row justify-content-between gy-4 mt-4">
            <div class="col-lg-8" data-aos="fade-up">
              <div class="portfolio-description">
                <h2>InPick — AI 기반 여행 일정 생성 및 추천 시스템</h2>
                <p class="lead text-muted">
                  사용자의 취향과 위치 정보를 분석하여 개인화된 여행 코스를 설계해주는 올인원 여행
                  플랫폼입니다.
                </p>

                <hr class="my-4" />

                <h3 class="section-title">1. 시스템 아키텍처 (System Architecture)</h3>
                <p>
                  FastAPI를 중심으로 다양한 AI 모델과 3종류의 데이터베이스(RDB, NoSQL, Vector DB)가
                  유기적으로 연결된 구조입니다.
                </p>

                <div class="diagram-container">
<pre class="mermaid">
flowchart TB
  %%{init: {"flowchart": {"nodeSpacing": 25, "rankSpacing": 35}}}%%

  user["사용자"]

  subgraph INPICK["INPICK"]
    direction TB

    subgraph Browser["Browser"]
      direction TB
      spa["SPA<br/>React 19 · Vite 7<br/>TypeScript"]
    end

    subgraph Server["학원 서버 (Docker Host)"]
      direction TB
      nginx["Nginx<br/>Reverse Proxy · Static"]
      api["FastAPI<br/>(Gunicorn/Uvicorn)"]
    end
  end

  user -->|"HTTPS"| nginx
  nginx -->|"Static"| spa
  nginx -->|"Proxy /api"| api
  spa -->|"Session Cookie"| api


  %% =========================
  %% Data / Models (Hub)
  %% =========================
  dataHub["Data / Models"]
  api --> dataHub

  subgraph Data["Data / Models"]
    direction TB
    pg["PostgreSQL<br/>RDB"]
    mongo["MongoDB<br/>Session TTL"]
    faiss["FAISS<br/>Vector Index"]
    ml["PyTorch<br/>Model (.pt)"]
  end

  dataHub -->|"SQL"| pg
  dataHub -->|"Session"| mongo
  dataHub -->|"Vector Search"| faiss
  dataHub -->|"Load/Run"| ml


  %% =========================
  %% OAuth (Hub)
  %% =========================
  oauthHub["OAuth"]
  api --> oauthHub

  subgraph OAuth["OAuth Providers"]
    direction TB
    google["Google"]
    naver["Naver"]
    kakaoOAuth["Kakao"]
  end

  oauthHub -->|"Redirect"| google
  oauthHub -->|"Redirect"| naver
  oauthHub -->|"Redirect"| kakaoOAuth


  %% =========================
  %% LLM (Hub)
  %% =========================
  llmHub["LLM"]
  api --> llmHub

  subgraph LLM["LLM APIs"]
    direction TB
    openai["OpenAI"]
    claude["Claude<br/>(LangChain)"]
  end

  llmHub -->|"Call"| openai
  llmHub -->|"Call"| claude


  %% =========================
  %% Maps / Routing (Hub)
  %% =========================
  mapsHub["Maps / Routing"]
  spa --> mapsHub
  api --> mapsHub

  subgraph Maps["Maps / Routing"]
    direction TB
    kakaoMaps["Kakao Maps<br/>JS SDK"]
    ncpMap["NCP Map<br/>Directions"]
    tmap["TMAP"]
  end

  mapsHub -->|"UI"| kakaoMaps
  mapsHub -->|"Route/POI"| ncpMap
  mapsHub -->|"Route"| tmap


  %% =========================
  %% CI/CD
  %% =========================
  jenkins["Jenkins<br/>CI/CD"]
  jenkins -.->|"Deploy"| nginx
  jenkins -.->|"Deploy"| api


  %% =========================
  %% Styles
  %% =========================
  classDef person fill:#F3E8FF,stroke:#7C3AED,stroke-width:2px;
  classDef c_container fill:#E8F1FF,stroke:#2563EB,stroke-width:2px;
  classDef external fill:#FFF4E5,stroke:#F59E0B,stroke-width:2px;
  classDef datastore fill:#E9FBF0,stroke:#16A34A,stroke-width:2px;

  class user person;
  class spa,nginx,api,dataHub,oauthHub,llmHub,mapsHub c_container;
  class google,naver,kakaoOAuth,openai,claude,kakaoMaps,ncpMap,tmap,jenkins external;
  class pg,mongo,faiss,ml datastore;

</pre>


                  <p class="text-muted small mt-2">▲ React, FastAPI 및 다중 DB/AI 모델 연동 구조</p>
                </div>

                <h3 class="section-title mt-5">2. 주요 기능 및 화면 (UI/UX)</h3>
                <div class="row mt-4">
                  <div class="col-md-6">
                    <div class="screenshot-placeholder">
                      <img src="assets/img/portfolio/inpick_1.gif" alt="" />
                    </div>
                    <h5>맞춤 장소 추천</h5>
                    <p class="small">
                      지역, 기간, 동행자, 테마를 단계별로 입력받아 CBF, CF 추천 알고리즘을 통해
                      최적의 장소를 제안합니다.
                    </p>
                  </div>
                  <div class="col-md-6">
                    <div class="screenshot-placeholder">
                      <img src="assets/img/portfolio/inpick_2.gif" alt="" />
                    </div>
                    <h5>시퀀스 추천 + 지도 기반 경로 확인</h5>
                    <p class="small">
                      시퀀스 추천을 통해 생성된 일정의 동선을 Kakao Map과 TMAP API로 시각화하여
                      보여줍니다.
                    </p>
                  </div>
                </div>

                <h3 class="section-title mt-5">3. 4단계 여행 일정 생성 UI Flow</h3>

                <p>
                  지역·기간·동행·테마 입력 후, AI 추천 모델을 선택해 일정 초안을 만들고 지도에서
                  편집한 뒤 저장합니다.
                </p>
                <div class="diagram-container">
<pre class="mermaid">
sequenceDiagram
    participant U as User
    participant S1 as Step1(조건 입력)
    participant S2 as Step2(장소/지도/AI생성)
    participant S3 as Step3(숙소 선택)
    participant S4 as Step4(최종 저장)
    participant BE as FastAPI

    U->>S1: 1. 지역/기간/동행/테마 입력
    S1->>BE: 2. GET /region/list (지역 목록)
    S1-->>U: 3. 기본 추천 후보/좌표 확보

    U->>S2: 4. 추천 모델 선택 후 "AI 생성"
    S2->>BE: 5. POST /itinerary/generate {model_name, base_itinerary}
    BE-->>S2: 6. ItineraryResponse(일정 초안)
    S2-->>U: 7. 지도(카카오맵)에서 동선 확인/장소 수정

    U->>S3: 8. 숙소 선택(지도/리스트)
    S3->>BE: 9. GET /accommodation/list
    BE-->>S3: 10. 숙소 후보 반환

    U->>S4: 11. 최종 확정/시간 미세조정
    S4->>BE: 12. POST /itinerary/createItinerary (DB 저장)
    BE-->>U: 13. 저장 완료 + 내 일정 리스트 갱신
</pre>
                </div>
                <h3 class="section-title mt-5">4. 데이터베이스 설계 (ERD)</h3>
                <p>
                  사용자 정보와 장소 데이터는 관계형 DB에, 세션과 로그는 NoSQL에 분산 저장합니다.
                </p>

                <div class="diagram-container">
                  <div class="screenshot-placeholder screenshot-auto">
                    <img src="./assets/img/portfolio/inpick_erd.png" alt="" />
                  </div>
                  <p class="text-muted small mt-2">▲ PostgreSQL 핵심 엔티티 관계도</p>
                </div>

                <h3 class="section-title mt-5">5. 기술 스택 (Tech Stack)</h3>
                <div class="row">
                  <div class="col-md-4 mb-3">
                    <div class="card h-100 shadow-sm border-0 bg-light">
                      <div class="card-body">
                        <h5 class="card-title fw-bold">Frontend</h5>
                        <span class="badge bg-primary tech-badge">React 19</span>
                        <span class="badge bg-primary tech-badge">TypeScript</span>
                        <span class="badge bg-primary tech-badge">Vite 7</span>
                        <span class="badge bg-dark tech-badge">Tailwind CSS 4</span>
                        <span class="badge bg-warning text-dark tech-badge">Kakao Maps SDK</span>
                        <span class="badge bg-secondary tech-badge">shadcn/ui</span>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4 mb-3">
                    <div class="card h-100 shadow-sm border-0 bg-light">
                      <div class="card-body">
                        <h5 class="card-title fw-bold">Backend & AI</h5>
                        <span class="badge bg-success tech-badge">FastAPI</span>
                        <span class="badge bg-warning text-dark tech-badge">Python</span>
                        <span class="badge bg-info tech-badge">PyTorch</span>
                        <span class="badge bg-info tech-badge">FAISS (Vector)</span>
                        <span class="badge bg-dark tech-badge">LangChain</span>
                        <span class="badge bg-primary tech-badge">OAuth 2.0</span>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4 mb-3">
                    <div class="card h-100 shadow-sm border-0 bg-light">
                      <div class="card-body">
                        <h5 class="card-title fw-bold">Data & Infra</h5>
                        <span class="badge bg-secondary tech-badge">PostgreSQL</span>
                        <span class="badge bg-success tech-badge">MongoDB</span>
                        <span class="badge bg-primary tech-badge">Docker</span>
                        <span class="badge bg-warning text-dark tech-badge">Jenkins</span>
                        <span class="badge bg-dark tech-badge">Nginx</span>
                      </div>
                    </div>
                  </div>
                </div>

                <h3 class="section-title mt-5">6. 트러블 슈팅</h3>
                <p class="mb-4">
                  개발/배포 과정에서 발생한 이슈를 <strong>증상 → 원인 → 해결</strong> 흐름으로
                  정리했습니다.
                </p>

                <ul class="troubleshooting-list">
                  <!-- 1) CORS -->
                  <li class="troubleshooting-item">
                    <h5 class="ts-title">[CORS] 프론트 API 호출 실패 (CORS 에러)</h5>

                    <div class="ts-block">
                      <div class="ts-label">증상</div>
                      <div class="ts-desc">
                        브라우저에서 API 요청이 차단되며 호출이 실패(CORS 오류 발생)
                      </div>
                    </div>

                    <div class="ts-block">
                      <div class="ts-label">원인</div>
                      <div class="ts-desc">
                        FastAPI에서 허용 Origin/자격 증명(쿠키) 설정이 누락되어 브라우저가 요청을
                        막음
                      </div>
                    </div>

                    <div class="ts-block">
                      <div class="ts-label">해결</div>
                      <div class="ts-desc">
                        <code>CORSMiddleware</code> 적용 후 <code>allow_origins</code>에 프론트 URL
                        추가, <code>allow_credentials</code> 활성화로 세션 기반 인증이 동작하도록
                        수정
                      </div>
                    </div>
                  </li>

                  <!-- 2) 401 / 인증 풀림 -->
                  <li class="troubleshooting-item">
                    <h5 class="ts-title">[Auth] 로그인 후 간헐적 401 / 사용자 정보 조회 실패</h5>

                    <div class="ts-block">
                      <div class="ts-label">증상</div>
                      <div class="ts-desc">
                        로그인 이후 간헐적으로 인증이 풀리거나(401), 사용자 정보 조회 API가 실패
                      </div>
                    </div>

                    <div class="ts-block">
                      <div class="ts-label">원인</div>
                      <div class="ts-desc">
                        요청 시 세션/쿠키 전송 누락 또는 인증 헤더/쿠키 흐름이 불안정하여 서버가
                        비인증 요청으로 판단
                      </div>
                    </div>

                    <div class="ts-block">
                      <div class="ts-label">해결</div>
                      <div class="ts-desc">
                        Axios 인스턴스에 요청/응답 로깅 + 인터셉터 적용,
                        <code>withCredentials</code> 포함 여부를 점검해 쿠키 전송/인증 흐름을 안정화
                      </div>
                    </div>
                  </li>

                  <!-- 3) 추천 기능 500 / 파일 누락 -->
                  <li class="troubleshooting-item">
                    <h5 class="ts-title">[ML] 추천 API 호출 시 500 (FileNotFoundError)</h5>

                    <div class="ts-block">
                      <div class="ts-label">증상</div>
                      <div class="ts-desc">
                        추천 기능 호출 시 서버가 <code>500</code>으로 종료되며
                        <code>FileNotFoundError</code> 발생
                      </div>
                    </div>

                    <div class="ts-block">
                      <div class="ts-label">원인</div>
                      <div class="ts-desc">
                        모델 파일(<code>nextpoi_gru4rec.pt</code>)이 배포 환경에 포함되지 않거나
                        로딩 경로가 잘못되어 ML artifact를 찾지 못함
                      </div>
                    </div>

                    <div class="ts-block">
                      <div class="ts-label">해결</div>
                      <div class="ts-desc">
                        <code>app/ml/artifacts/</code> 디렉토리 구성 및 배포 포함 여부를 점검하고,
                        모델 파일 배치를 재정리하여 로딩 실패를 제거
                      </div>
                    </div>
                  </li>

                  <!-- 4) .env / 환경변수 누락 -->
                  <li class="troubleshooting-item">
                    <h5 class="ts-title">
                      [Config] .env 누락/필수 값 미설정 (pydantic field required)
                    </h5>

                    <div class="ts-block">
                      <div class="ts-label">증상</div>
                      <div class="ts-desc">
                        개발/배포 환경에서 실행 시
                        <code>pydantic field required</code> 에러로 서버 기동 실패
                      </div>
                    </div>

                    <div class="ts-block">
                      <div class="ts-label">원인</div>
                      <div class="ts-desc">
                        <code>.env</code>가 누락되거나 필수 환경변수가 비어 있어 Settings 로딩
                        단계에서 검증에 실패
                      </div>
                    </div>

                    <div class="ts-block">
                      <div class="ts-label">해결</div>
                      <div class="ts-desc">
                        Settings 기준 필수 환경변수 목록을 재정리하고, 실행 전 환경변수
                        검증(체크리스트/검증 단계)을 추가하여 재발 방지
                      </div>
                    </div>
                  </li>

                  <!-- 5) MongoDB TTL / 세션 만료 -->
                  <li class="troubleshooting-item">
                    <h5 class="ts-title">
                      [Session] MongoDB TTL 인덱스로 인한 예기치 못한 로그아웃
                    </h5>

                    <div class="ts-block">
                      <div class="ts-label">증상</div>
                      <div class="ts-desc">
                        사용 중 갑자기 로그아웃되거나, 세션이 만료되어 인증이 끊기는 현상이 발생
                      </div>
                    </div>

                    <div class="ts-block">
                      <div class="ts-label">원인</div>
                      <div class="ts-desc">
                        MongoDB 세션이 TTL 인덱스 정책에 의해 만료되며, 사용자 활동과 무관하게
                        세션이 삭제될 수 있음
                      </div>
                    </div>

                    <div class="ts-block">
                      <div class="ts-label">해결</div>
                      <div class="ts-desc">
                        세션(쿠키) 만료 정책(TTL)과 갱신(refresh) 흐름을 점검하고, 갱신
                        타이밍/유효기간을 조정하여 사용자 경험을 개선
                      </div>
                    </div>
                  </li>
                </ul>

                <div class="diagram-container">
                  <div class="screenshot-placeholder screenshot-auto">
                    <img src="./assets/img/portfolio/InPick_drive.png" alt="" />
                  </div>
                  <p class="text-muted small mt-2">
                    ▲ GoogleDrive를 통한 기획, 문서화, 협업 및 트러블 슈팅 관리
                  </p>
                </div>
              </div>
            </div>

            <div class="col-lg-3" data-aos="fade-up" data-aos-delay="100">
              <div class="portfolio-info shadow-sm p-4 rounded">
                <h3>Project Info</h3>
                <ul class="list-unstyled">
                  <li class="mb-3"><strong>Category</strong> <br />AI 웹 애플리케이션 (풀스택)</li>
                  <li class="mb-3">
                    <strong>Role</strong> <br />팀장, DB 설계, 추천 모델(CBF/CF), 백엔드
                  </li>
                  <li class="mb-3"><strong>Date</strong> <br />2025.09 – 2025.11 (3개월)</li>
                  <li class="mb-3">
                    <strong>GitHub</strong><br />
                    <a
                      href="https://github.com/6-n0kim/InPick_BACKEND"
                      target="_blank"
                      class="d-block text-truncate"
                      ><i class="bi bi-github"></i> Backend</a
                    >
                    <a
                      href="https://github.com/6-n0kim/InPick_FRONTEND"
                      target="_blank"
                      class="d-block text-truncate"
                      ><i class="bi bi-github"></i> Frontend</a
                    >
                  </li>
                  <li class="mb-3">
                    <strong>Deployment</strong><br />
                    <a
                      href="https://inpick.aicc-project.com/"
                      target="_blank"
                      class="btn btn-primary btn-sm w-100 mt-2"
                      >사이트 방문하기</a
                    >
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <div id="site-footer"></div>

    <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center">
      <i class="bi bi-arrow-up-short"></i>
    </a>

    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/vendor/aos/aos.js"></script>
    <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
    <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
    <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
    <script src="assets/js/includes.js"></script>

    <script src="assets/js/zoom.js"></script>
    <script src="assets/js/main.js"></script>
  </body>
</html>
