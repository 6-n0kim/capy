<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>BodyManager - Portfolio Details</title>
    <meta
      name="description"
      content="Spring Boot와 React 기반의 헬스장 통합 관리 시스템 BodyManager 포트폴리오"
    />

    <link href="assets/img/favicon.png" rel="icon" />
    <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon" />

    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />

    <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet" />
    <link href="assets/vendor/aos/aos.css" rel="stylesheet" />
    <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet" />
    <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet" />

    <link href="assets/css/main.css" rel="stylesheet" />

    <!-- Page Custom CSS (moved from inline <style>) -->
    <link href="assets/css/portfolio-details-custom.css" rel="stylesheet" />

    <script type="module">
      import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
      mermaid.initialize({ startOnLoad: true, theme: 'neutral' });
    </script>
  </head>

  <body class="portfolio-details-page">
    <div id="site-header"></div>

    <main class="main">
      <div class="page-title" data-aos="fade">
        <div class="container d-lg-flex justify-content-between align-items-center">
          <h1 class="mb-2 mb-lg-0">BodyManager Project</h1>
          <nav class="breadcrumbs">
            <ol>
              <li><a href="index.html">Home</a></li>
              <li class="current">BodyManager</li>
            </ol>
          </nav>
        </div>
      </div>

      <section id="portfolio-details" class="portfolio-details section">
        <div class="container" data-aos="fade-up">
          <div class="row justify-content-between gy-4 mt-4">
            <div class="col-lg-8" data-aos="fade-up">
              <div class="portfolio-description">
                <h2>BodyManager — 헬스장 통합 운영 관리 플랫폼</h2>
                <strong
                  >회원 관리, 운동 기록, 결제부터 실시간 상담까지<br />
                  피트니스 센터 운영에 필요한 모든 기능을 하나로 통합한 웹 서비스</strong
                >

                <hr class="my-4" />

                <h3 class="section-title">1. 시스템 아키텍처 (System Architecture)</h3>
                <p>
                  Spring Boot와 React를 분리하여 구축하고, JWT를 이용한 Stateless 인증 방식을
                  채택했습니다.
                </p>

                <div class="diagram-container">
                  <pre class="mermaid">
graph TD
    subgraph Client [Client Side]
        React["React Application<br>(Redux Toolkit)"]
    end

    subgraph Server [Server Side]
        SpringBoot["Spring Boot API Server<br>(Spring Security)"]
        WebSocket["WebSocket / STOMP"]
    end

    subgraph Data [Data Persistence]
        MariaDB[("MariaDB<br>(JPA / QueryDSL)")]
        S3[("AWS S3<br>(File Storage)")]
    end

    subgraph External [External Services]
        Toss["Toss Payments"]
        SMTP["Gmail SMTP"]
    end

    React -->|REST API / JWT| SpringBoot
    React -->|Real-time Chat| WebSocket
    SpringBoot -->|ORM| MariaDB
    SpringBoot -->|Image Upload| S3
    SpringBoot -->|Payment Verify| Toss
    SpringBoot -->|Email Auth| SMTP
</pre>
                  <p class="text-muted small mt-2">
                    ▲ React 클라이언트와 Spring Boot 서버 간의 데이터 흐름
                  </p>
                </div>

                <h3 class="section-title mt-5">2. 주요 기능 및 화면 (UI/UX)</h3>
                <div class="row mt-4">
                  <div class="col-md-6">
                    <div class="screenshot-placeholder">
                      <img src="assets/img/portfolio/bd_pic1.png" alt="체성분 시각화" />
                    </div>
                    <h5>체성분 시각화</h5>
                    <p class="small">
                      Recharts 라이브러리를 활용하여 인바디 데이터의 변화 추이를 라인/바/레이더
                      차트로 직관적으로 보여줍니다.
                    </p>
                  </div>
                  <div class="col-md-6">
                    <div class="screenshot-placeholder">
                      <img src="assets/img/portfolio/bd_pic2.png" alt="실시간 상담 시스템" />
                    </div>
                    <h5>실시간 상담 시스템</h5>
                    <p class="small">
                      WebSocket을 활용한 실시간 양방향 통신으로 실시간 상담을 제공합니다.
                    </p>
                  </div>
                </div>

                <h3 class="section-title mt-5">3. 핵심 로직: STOMP 실시간 채팅</h3>
                <p>메시지 브로커 패턴을 활용한 실시간 양방향 통신 프로세스입니다.</p>

                <div class="diagram-container">
                  <pre class="mermaid">
sequenceDiagram
    participant UserA as Sender (Client)
    participant Server as Spring Boot (Broker)
    participant UserB as Receiver (Client)
    participant DB as MariaDB

    UserA->>Server: 1. CONNECT (SockJS/WS)
    UserB->>Server: 1. CONNECT (SockJS/WS)
    UserB->>Server: 2. SUBSCRIBE (/sub/room/1)
    
    UserA->>Server: 3. SEND (/pub/chat/message)<br>Content: "안녕하세요!"
    
    activate Server
    Server->>DB: 4. 메시지 영구 저장 (JPA)
    Server->>Server: 5. 메시지 브로커 라우팅
    Server-->>UserB: 6. MESSAGE (/sub/room/1)<br>Content: "안녕하세요!"
    deactivate Server

    UserB->>UserB: 7. UI 업데이트 (Redux State)
</pre>
                </div>

                <h3 class="section-title mt-5">4. 데이터베이스 설계 (ERD)</h3>
                <p>
                  회원 정보, 인바디 기록, 출석, 결제 정보가 유기적으로 연결된 관계형 데이터베이스
                  구조입니다.
                </p>

                <div class="diagram-container">
                  <div class="screenshot-placeholder screenshot-auto">
                    <img src="./assets/img/portfolio/bm_erd.png" alt="" />
                  </div>
                  <p class="text-muted small mt-2">
                    ▲ MariaDB 주요 엔티티 관계도 (JPA Entity 기반)
                  </p>
                </div>

                <h3 class="section-title mt-5">5. 기술 스택 (Tech Stack)</h3>
                <div class="row">
                  <div class="col-md-4 mb-3">
                    <div class="card h-100 shadow-sm border-0 bg-light">
                      <div class="card-body">
                        <h5 class="card-title fw-bold">Backend</h5>
                        <span class="badge bg-success tech-badge">Spring Boot 2.6</span>
                        <span class="badge bg-success tech-badge">Spring Security</span>
                        <span class="badge bg-primary tech-badge">JPA / QueryDSL</span>
                        <span class="badge bg-dark tech-badge">JWT / OAuth2</span>
                        <span class="badge bg-warning text-dark tech-badge">WebSocket / STOMP</span>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4 mb-3">
                    <div class="card h-100 shadow-sm border-0 bg-light">
                      <div class="card-body">
                        <h5 class="card-title fw-bold">Frontend</h5>
                        <span class="badge bg-primary tech-badge">React 18</span>
                        <span class="badge bg-primary tech-badge">Redux Toolkit</span>
                        <span class="badge bg-info tech-badge">Styled Components</span>
                        <span class="badge bg-dark tech-badge">Recharts</span>
                        <span class="badge bg-secondary tech-badge">Axios</span>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4 mb-3">
                    <div class="card h-100 shadow-sm border-0 bg-light">
                      <div class="card-body">
                        <h5 class="card-title fw-bold">Infra & Tools</h5>
                        <span class="badge bg-warning text-dark tech-badge">MariaDB</span>
                        <span class="badge bg-warning text-dark tech-badge">AWS S3</span>
                        <span class="badge bg-primary tech-badge">Toss Payments</span>
                        <span class="badge bg-dark tech-badge">Swagger</span>
                      </div>
                    </div>
                  </div>
                </div>

                <h3 class="section-title mt-5">6. 트러블 슈팅</h3>
                <p class="mb-4">
                  개발 과정에서 발생한 이슈를 <strong>증상 → 원인 → 해결</strong> 흐름으로
                  정리했습니다.
                </p>

                <ul class="troubleshooting-list">
                  <!-- 1) JSON 데이터 전달 문제 -->
                  <li class="troubleshooting-item">
                    <h5 class="ts-title">[API] JSON 데이터가 정상적으로 전달되지 않음</h5>

                    <div class="ts-block">
                      <div class="ts-label">증상</div>
                      <div class="ts-desc">
                        API 호출은 되지만 서버에서 요청 body가 비어 있거나, 기대한 JSON 구조가
                        전달되지 않아 처리 실패가 발생
                      </div>
                    </div>

                    <div class="ts-block">
                      <div class="ts-label">원인</div>
                      <div class="ts-desc">
                        요청 헤더/바디 구성 오류 또는 Axios 요청 설정(데이터 전달 방식)이 맞지 않아
                        실제 전송 payload가 예상과 달라짐
                      </div>
                    </div>

                    <div class="ts-block">
                      <div class="ts-label">해결</div>
                      <div class="ts-desc">
                        Axios 인터셉터로 요청/응답을 로깅하여 실제 전송되는 payload를 확인하고, 요청
                        형식(JSON body/headers)을 정상화하여 데이터 전달 문제를 해결
                      </div>
                    </div>
                  </li>

                  <!-- 2) JWT 토큰 전달 문제 -->
                  <li class="troubleshooting-item">
                    <h5 class="ts-title">[Auth] JWT 인증 토큰이 정상적으로 전달되지 않음</h5>

                    <div class="ts-block">
                      <div class="ts-label">증상</div>
                      <div class="ts-desc">
                        로그인 이후에도 인증이 필요한 API에서 <code>401 Unauthorized</code>가
                        발생하거나, 토큰 누락으로 인해 인증 흐름이 끊김
                      </div>
                    </div>

                    <div class="ts-block">
                      <div class="ts-label">원인</div>
                      <div class="ts-desc">
                        요청에 <code>Authorization</code> 헤더가 포함되지 않거나, 토큰
                        저장/추출/주입 과정에서 누락이 발생
                      </div>
                    </div>

                    <div class="ts-block">
                      <div class="ts-label">해결</div>
                      <div class="ts-desc">
                        Axios interceptor에서 토큰을 읽어
                        <code>Authorization: Bearer ...</code> 형태로 자동 주입하도록 구성하여 인증
                        요청의 일관성을 확보
                      </div>
                    </div>
                  </li>

                  <!-- 3) CORS -->
                  <li class="troubleshooting-item">
                    <h5 class="ts-title">[CORS] 브라우저에서 API 호출이 차단됨</h5>

                    <div class="ts-block">
                      <div class="ts-label">증상</div>
                      <div class="ts-desc">
                        브라우저 콘솔에 CORS 오류가 발생하며 API 호출이 실패
                      </div>
                    </div>

                    <div class="ts-block">
                      <div class="ts-label">원인</div>
                      <div class="ts-desc">
                        프론트/백엔드 Origin이 달라 브라우저가 보안 정책으로 요청을 차단하며, 서버의
                        CORS 허용 설정이 충분하지 않음
                      </div>
                    </div>

                    <div class="ts-block">
                      <div class="ts-label">해결</div>
                      <div class="ts-desc">
                        프론트 작업자와 요청 URL/포트/인증 방식(쿠키/헤더)을 함께 점검하고, 서버
                        CORS 허용 정책을 맞춰 설정하여 문제를 해결
                      </div>
                    </div>
                  </li>
                </ul>

                <div class="diagram-container">
                  <div class="screenshot-placeholder screenshot-auto">
                    <img src="./assets/img/portfolio/bd_notion.png" alt="" />
                  </div>
                  <p class="text-muted small mt-2">▲ Notion을 통한 협업 및 트러블 슈팅 기록</p>
                </div>
              </div>
            </div>

            <div class="col-lg-3" data-aos="fade-up" data-aos-delay="100">
              <div class="portfolio-info shadow-sm p-4 rounded">
                <h3>Project Info</h3>
                <ul class="list-unstyled">
                  <li class="mb-3"><strong>Category</strong> <br />웹 애플리케이션 (풀스택)</li>
                  <li class="mb-3"><strong>Role</strong> <br />백엔드, 프론트엔드 (기여도 50%)</li>
                  <li class="mb-3"><strong>Date</strong> <br />2022.09 – 2022.12 (4개월)</li>
                  <li class="mb-3">
                    <strong>GitHub</strong><br />
                    <a
                      href="https://github.com/6-n0kim/bodymanager_server"
                      target="_blank"
                      class="d-block text-truncate"
                      ><i class="bi bi-github"></i> Backend</a
                    >
                    <a
                      href="https://github.com/6-n0kim/Body_Manager_client"
                      target="_blank"
                      class="d-block text-truncate"
                      ><i class="bi bi-github"></i> Frontend</a
                    >
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <div id="site-footer"></div>

    <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center">
      <i class="bi bi-arrow-up-short"></i>
    </a>

    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/vendor/aos/aos.js"></script>
    <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
    <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
    <script src="assets/js/includes.js"></script>

    <script src="assets/js/zoom.js"></script>
    <script src="assets/js/main.js"></script>
  </body>
</html>
