<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Docgen - Portfolio Details</title>
    <meta name="description" content="AI 기반 프로젝트 문서 자동 생성 플랫폼 Docgen 포트폴리오" />

    <link href="assets/img/favicon.png" rel="icon" />
    <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon" />

    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />

    <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet" />
    <link href="assets/vendor/aos/aos.css" rel="stylesheet" />
    <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet" />
    <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet" />

    <link href="assets/css/main.css" rel="stylesheet" />

    <!-- Page Custom CSS (moved from inline <style>) -->
    <link href="assets/css/portfolio-details-custom.css" rel="stylesheet" />

    <script type="module">
      import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
      mermaid.initialize({ startOnLoad: true, theme: 'neutral' });
    </script>
  </head>

  <body class="portfolio-details-page">
    <div id="site-header"></div>

    <main class="main">
      <div class="page-title" data-aos="fade">
        <div class="container d-lg-flex justify-content-between align-items-center">
          <h1 class="mb-2 mb-lg-0">DocGen Project</h1>
          <nav class="breadcrumbs">
            <ol>
              <li><a href="index.html">Home</a></li>
              <li class="current">DocGen</li>
            </ol>
          </nav>
        </div>
      </div>

      <section id="portfolio-details" class="portfolio-details section">
        <div class="container" data-aos="fade-up">
          <div class="row justify-content-between gy-4 mt-4">
            <div class="col-lg-8" data-aos="fade-up">
              <div class="portfolio-description">
                <h2>DocGen — AI 기반 프로젝트 문서 자동 생성 플랫폼</h2>
                <p class="lead text-muted">
                  효율성을 극대화한 프로젝트입니다.
                </p>

                <hr class="my-4" />

                <h3 class="section-title">1. 시스템 아키텍처 (System Architecture)</h3>
                <p>
                  DocGen은 비즈니스 로직과 AI 처리 부하를 분산하기 위해
                  <strong>MSA(Microservice Architecture)</strong>를 채택했습니다.
                </p>

                <div class="diagram-container">
<pre class="mermaid">
flowchart TB
  %%{init: {"flowchart": {"nodeSpacing": 25, "rankSpacing": 35}}}%%

  user["사용자"]

  subgraph DOCGEN["DOCGEN"]
    direction TB

    subgraph Browser["Browser"]
      direction TB
      spa["WebApp SPA<br/>React + Vite"]
    end

    subgraph AcademyServer["학원 서버<br/>(Docker Host)"]
      direction TB

      subgraph Compose["Docker Compose<br/>(main)"]
        direction TB
        nginx["Nginx<br/>Reverse Proxy · Static"]
        be1["Backend1 API<br/>NestJS (Node.js)"]
        be2["Backend2 AI API<br/>FastAPI (Python)"]
        pg["PostgreSQL"]
        mongo["MongoDB"]
        fs["File Storage<br/>Docker Volume / Host FS"]
      end
    end
  end

  openai["OpenAI API"]
  gemini["Google Gemini API"]
  anthropic["Anthropic Claude API"]

  user -->|"HTTPS"| nginx
  nginx -->|"Static"| spa
  nginx -->|"Proxy /api"| be1
  nginx -->|"Proxy /ai"| be2

  spa -->|"REST API<br/>(JWT)"| be1


  %% =========================
  %% DB / Storage (Hub)
  %% =========================
  dataHub["DB / Storage"]
  be1 --> dataHub
  be2 --> dataHub

  dataHub -->|"SQL<br/>(TypeORM)"| pg
  dataHub -->|"Docs / Runs"| mongo
  dataHub -->|"Files"| fs


  %% =========================
  %% Service-to-service
  %% =========================
  be1 -->|"Generate docs<br/>(HTTP)"| be2


  %% =========================
  %% LLM Providers (Hub)
  %% =========================
  llmHub["LLM Providers"]
  be2 -->|"LLM Call"| llmHub

  llmHub -->|"Call"| openai
  llmHub -->|"Call"| gemini
  llmHub -->|"Call"| anthropic


  %% =========================
  %% Styles
  %% =========================
  classDef person fill:#F3E8FF,stroke:#7C3AED,stroke-width:2px;
  classDef c_container fill:#E8F1FF,stroke:#2563EB,stroke-width:2px;
  classDef external fill:#FFF4E5,stroke:#F59E0B,stroke-width:2px;
  classDef datastore fill:#E9FBF0,stroke:#16A34A,stroke-width:2px;

  class user person;
  class spa,nginx,be1,be2,dataHub,llmHub c_container;
  class openai,gemini,anthropic external;
  class pg,mongo,fs datastore;
</pre>

                  <p class="text-muted small mt-2">
                    ▲ React, NestJS, FastAPI 간의 데이터 흐름 및 DB 연결 구조
                  </p>
                </div>

                <h3 class="section-title mt-5">2. 주요 기능 및 화면 (UI/UX)</h3>
                <p>
                  직관적인 대시보드와 스프레드시트 형태의 에디터를 통해 사용자 편의성을 높였습니다.
                </p>

                <div class="row mt-4">
                  <div class="col-md-6">
                    <div class="screenshot-placeholder">
                      <img src="assets/img/portfolio/docgen_1.png" alt="" />
                    </div>
                    <h5>프로젝트 및 타임라인 관리</h5>
                    <p class="small">
                      해시태그 기반 프로젝트 분류 및 진행 상황을 시각적으로 파악할 수 있는 타임라인
                      기능.
                    </p>
                  </div>
                  <div class="col-md-6">
                    <div class="screenshot-placeholder">
                      <img src="assets/img/portfolio/docgen_2.gif" alt="" />
                    </div>
                    <h5>AI 문서 생성 및 엑셀 편집</h5>
                    <p class="small">
                      요구사항(PRD), 기능명세(FSD) 자동 생성 후 Handsontable을 이용한 웹 엑셀 편집
                      지원.
                    </p>
                  </div>
                </div>

                <h3 class="section-title mt-5">3. AI 문서 생성 프로세스 (Logic Flow)</h3>
                <p>
                  LangChain과 CrewAI를 활용한 <strong>멀티 에이전트(Multi-Agent) 시스템</strong>이
                  단계별로 문서를 구체화합니다.
                </p>

                <div class="diagram-container">
<pre class="mermaid">
sequenceDiagram
    actor User
    participant API as FastAPI Server
    participant QGen as Question Agent
    participant ListGen as List Agent
    participant DetailGen as Detail Agent
    participant DB as MongoDB

    User->>API: 요구사항 입력
    API->>QGen: 핵심 질문 생성 요청
    QGen-->>API: 질문 리스트 반환
    API->>User: 질문 제시
    User->>API: 답변 제출
    
    rect rgb(240, 248, 255)
    Note right of API: 백그라운드 태스크 실행
    API->>ListGen: 요구사항 목록 생성 요청
    ListGen-->>API: 기능 목록(List)
    API->>DetailGen: 상세 스펙 작성 요청
    DetailGen-->>API: 상세 명세(Detail)
    end
    
    API->>DB: 최종 문서 저장
    API-->>User: 완료 알림 및 엑셀 다운로드
</pre>
                </div>

                <h3 class="section-title mt-5">4. 데이터베이스 설계 (ERD)</h3>
                <p>
                  정형 데이터는 PostgreSQL에, 비정형 문서 데이터는 MongoDB에 저장하는
                  <strong>Polyglot Persistence</strong> 전략을 사용했습니다.
                </p>

                <div class="diagram-container">
                  <div class="screenshot-placeholder screenshot-auto">
                    <img src="./assets/img/portfolio/doc-erd.png" alt="" />
                  </div>
                  <p class="text-muted small mt-2">▲ PostgreSQL 주요 테이블 관계도 (논리적 모델)</p>
                </div>

                <h3 class="section-title mt-5">5. 기술 스택 (Tech Stack)</h3>
                <div class="row">
                  <div class="col-md-4 mb-3">
                    <div class="card h-100 shadow-sm border-0 bg-light">
                      <div class="card-body">
                        <h5 class="card-title fw-bold">Frontend</h5>
                        <span class="badge bg-primary tech-badge">React 19</span>
                        <span class="badge bg-primary tech-badge">TypeScript</span>
                        <span class="badge bg-primary tech-badge">Vite</span>
                        <span class="badge bg-info tech-badge">Zustand</span>
                        <span class="badge bg-secondary tech-badge">Tailwind CSS</span>
                        <span class="badge bg-dark tech-badge">Handsontable</span>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4 mb-3">
                    <div class="card h-100 shadow-sm border-0 bg-light">
                      <div class="card-body">
                        <h5 class="card-title fw-bold">Backend (Main)</h5>
                        <span class="badge bg-danger tech-badge">NestJS</span>
                        <span class="badge bg-danger tech-badge">Node.js</span>
                        <span class="badge bg-primary tech-badge">TypeScript</span>
                        <span class="badge bg-success tech-badge">PostgreSQL</span>
                        <span class="badge bg-warning text-dark tech-badge">TypeORM</span>
                        <span class="badge bg-dark tech-badge">Swagger</span>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4 mb-3">
                    <div class="card h-100 shadow-sm border-0 bg-light">
                      <div class="card-body">
                        <h5 class="card-title fw-bold">AI Server</h5>
                        <span class="badge bg-warning text-dark tech-badge">Python</span>
                        <span class="badge bg-warning text-dark tech-badge">FastAPI</span>
                        <span class="badge bg-success tech-badge">MongoDB</span>
                        <span class="badge bg-info tech-badge">LangChain</span>
                        <span class="badge bg-info tech-badge">CrewAI</span>
                        <span class="badge bg-dark tech-badge">OpenAI/Gemini</span>
                      </div>
                    </div>
                  </div>
                </div>

                <h3 class="section-title mt-5">6. 트러블 슈팅</h3>
<p class="mb-4">
  Jenkins + SonarQube + Docker 기반 CI/CD 구축 과정에서 겪었던 이슈를
  <strong>증상 → 원인 → 해결</strong> 흐름으로 정리했습니다.
</p>

<ul class="troubleshooting-list">
  <!-- 1) Docker 권한/데몬 연결 -->
  <li class="troubleshooting-item">
    <h5 class="ts-title">[1] Jenkins가 Docker 데몬에 연결되지 않음</h5>

    <div class="ts-block">
      <div class="ts-label">증상</div>
      <div class="ts-desc">
        <code>Cannot connect to the Docker daemon</code>, <code>permission denied</code> 발생<br />
        Jenkins 단계에서 <code>docker build</code> / <code>docker ps</code> 실행 실패
      </div>
    </div>

    <div class="ts-block">
      <div class="ts-label">원인</div>
      <div class="ts-desc">
        Jenkins 실행 유저가 <code>/var/run/docker.sock</code> 접근 권한이 없거나<br />
        Jenkins 컨테이너가 Docker 데몬 소켓을 마운트하지 않아 연결 경로가 끊김
      </div>
    </div>

    <div class="ts-block">
      <div class="ts-label">해결</div>
      <div class="ts-desc">
        Jenkins 컨테이너에 <code>/var/run/docker.sock</code> 마운트(권장)<br />
        빌드 노드/호스트에서 Jenkins 유저를 <code>docker</code> 그룹에 포함 후 재시작
      </div>
    </div>
  </li>

  <!-- 3) Workspace / Build Context -->
  <li class="troubleshooting-item">
    <h5 class="ts-title">[2] Dockerfile/소스가 누락되어 빌드 실패 (경로/컨텍스트 문제)</h5>

    <div class="ts-block">
      <div class="ts-label">증상</div>
      <div class="ts-desc">
        <code>Dockerfile not found</code>, <code>COPY failed: file not found in build context</code><br />
        특정 파일이 이미지 빌드 컨텍스트에 포함되지 않아 단계에서 중단
      </div>
    </div>

    <div class="ts-block">
      <div class="ts-label">원인</div>
      <div class="ts-desc">
        Jenkins가 체크아웃한 폴더와 실제 <code>docker build</code> 실행 위치가 달라<br />
        빌드 컨텍스트가 잘못 잡힘(서브폴더/멀티모듈에서 특히 빈번)
      </div>
    </div>

    <div class="ts-block">
      <div class="ts-label">해결</div>
      <div class="ts-desc">
        파이프라인에서 작업 디렉토리를 명확히 고정(<code>dir(...)</code> 개념)<br />
        <code>docker build -f path/to/Dockerfile .</code> 처럼 Dockerfile 경로/컨텍스트를 명시
      </div>
    </div>
  </li>

  <!-- 5) SonarQube 기동 불가 -->
  <li class="troubleshooting-item">
    <h5 class="ts-title">[3] SonarQube 컨테이너가 기동되지 않고 재시작 반복</h5>

    <div class="ts-block">
      <div class="ts-label">증상</div>
      <div class="ts-desc">
        SonarQube가 계속 restart / healthcheck 실패<br />
        로그에 Elasticsearch bootstrap check 또는 <code>vm.max_map_count</code> 관련 오류 노출
      </div>
    </div>

    <div class="ts-block">
      <div class="ts-label">원인</div>
      <div class="ts-desc">
        Elasticsearch 요구 커널 설정(<code>vm.max_map_count</code>) 미충족 또는 메모리 부족<br />
        (운영에서) 내장 DB 사용으로 안정성/성능 이슈 발생 가능
      </div>
    </div>

    <div class="ts-block">
      <div class="ts-label">해결</div>
      <div class="ts-desc">
        호스트 커널 파라미터 설정(<code>vm.max_map_count</code>) 조정 후 재기동<br />
        SonarQube 컨테이너 메모리 증설, 운영은 PostgreSQL 연동 구성 권장
      </div>
    </div>
  </li>
</ul>


                <div class="diagram-container">
                  <div class="screenshot-placeholder screenshot-auto">
                    <img src="./assets/img/portfolio/docgen_drive.png" alt="" />
                  </div>
                  <p class="text-muted small mt-2">▲ GoogleDrive를 통한 기획, 문서화, 협업 및 트러블 슈팅 관리</p>
                </div>
              </div>
            </div>

            <div class="col-lg-3" data-aos="fade-up" data-aos-delay="100">
              <div class="portfolio-info shadow-sm p-4 rounded">
                <h3>Project Info</h3>
                <ul class="list-unstyled">
                  <li class="mb-3"><strong>Category</strong> <br />AI 웹 애플리케이션 (풀스택)</li>
                  <li class="mb-3">
                    <strong>Role</strong> <br />백엔드, 프론트엔드, DB 설계, AI 서버
                  </li>
                  <li class="mb-3"><strong>Date</strong> <br />2025.07 – 2025.08 (2개월)</li>
                  <li class="mb-3">
                    <strong>GitHub</strong><br />
                    <a
                      href="https://github.com/6-n0kim/docgen-backend"
                      target="_blank"
                      class="d-block text-truncate"
                      ><i class="bi bi-github"></i> Backend</a
                    >
                    <a
                      href="https://github.com/6-n0kim/docgen-fastapi"
                      target="_blank"
                      class="d-block text-truncate"
                      ><i class="bi bi-github"></i> AI Server</a
                    >
                    <a
                      href="https://github.com/6-n0kim/docgen-frontend"
                      target="_blank"
                      class="d-block text-truncate"
                      ><i class="bi bi-github"></i> Frontend</a
                    >
                  </li>
                  <li class="mb-3">
                    <strong>Deployment</strong><br />
                    <a
                      href="https://docgen.aicc-project.com/"
                      target="_blank"
                      class="btn btn-primary btn-sm w-100 mt-2"
                      >사이트 방문하기</a
                    >
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <div id="site-footer"></div>

    <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center">
      <i class="bi bi-arrow-up-short"></i>
    </a>

    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/vendor/aos/aos.js"></script>
    <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
    <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
    <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
    <script src="assets/js/includes.js"></script>

    <script src="assets/js/main.js"></script>
  </body>
</html>
